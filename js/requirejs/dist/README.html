<h1 id="RequireJS-dist"><a href="#RequireJS-dist" class="headerlink" title="RequireJS dist"></a>RequireJS dist</h1><p>This directory contains the tools that are used to build distributions of RequireJS and its web site.</p>
<p>When doing a release, do the following:</p>
<ul>
<li>Update files to the new version number:<ul>
<li>require.js, both places</li>
<li>docs/download.md: check for nested paths too, add new release section</li>
<li>pre.html</li>
<li>post.html</li>
</ul>
</li>
<li>Update version in x.js in the r.js project if necessary.</li>
<li>.updatesubs.sh</li>
<li>Check in changes to r.js project.</li>
<li><p>Check in changes to sample projects:</p>
<ul>
<li>requirejs/example-jquery-cdn</li>
<li>requirejs/example-jquery-shim</li>
<li>requirejs/example-multipage</li>
<li>requirejs/example-multipage-shim</li>
<li>requirejs/example-libglobal</li>
<li>volojs/create-template</li>
<li>volojs/create-responsive-template</li>
<li>amodrojs/amodro-trace (UPDATE ESPRIMA(?), parse.js?, run tests too)</li>
</ul>
</li>
<li><p>Tag the requirejs and r.js trees:</p>
<ul>
<li>git tag -am “Release 0.0.0” 0.0.0</li>
<li>git push –tags</li>
</ul>
</li>
<li><p>UPDATE THE “latest” tags</p>
</li>
<li><p>Commit changes to cajon, test</p>
<ul>
<li>Rev cajon version</li>
<li>change package.json</li>
<li>tag it</li>
</ul>
</li>
<li>Update the requirejs-npm directory<ul>
<li>Update version in package.json</li>
<li>Modify bin/r.js to add: #!/usr/bin/env node</li>
<li>npm uninstall -g requirejs</li>
<li>npm install . -g</li>
<li>r.js -v</li>
<li>node (then use repl to do require(“requirejs”))</li>
<li>Try a local install.</li>
<li>npm publish (in the requirejs-npm/requirejs directory)</li>
</ul>
</li>
<li>Update requirejs-bower<ul>
<li>tag the repo, with “latest” too.</li>
<li>git push</li>
</ul>
</li>
<li>Update the requirejs-nuget directory (DO ON WINDOWS)<ul>
<li>Update the require.js and r.js versions in content/Scripts using <code>volo add -nostamp -f</code></li>
<li>Update Package.nuspec to rev version number.</li>
<li>NuGet.exe Pack Package.nuspec</li>
<li>NuGet.exe Push RequireJS.0.0.0.nupkg</li>
</ul>
</li>
</ul>
<p>Now pull down the tagged version to do a distribution, do this in git/ directory:</p>
<ul>
<li>rm -rf ./requirejs-dist ./requirejs-build</li>
<li>git clone git://github.com/requirejs/requirejs.git requirejs-dist</li>
<li>cd requirejs-dist</li>
<li>git checkout 0.0.0</li>
<li>cd dist</li>
</ul>
<p>Run the distribution tasks.</p>
<p>To generate a build</p>
<ul>
<li>./dist-build.sh 0.0.0</li>
</ul>
<p>To generate the web site:</p>
<ul>
<li>node dist-site.js</li>
<li>cd dist-site</li>
<li>zip -r docs.zip ./*</li>
<li>mv docs.zip ../../../requirejs-build/</li>
</ul>
